<div class="container">
  <div class="analysis-content">
    <div class="filter-section">
      <div class="filters">
        <mat-form-field>
          <mat-label>Trainees:</mat-label>
          <mat-select [compareWith]="compareTrainees" [multiple]="true" [value]="_selectedTraineeSignal()"
            (selectionChange)="idsChange($event)">
            <mat-option *ngFor="let id of availableIds()" [value]="id">
              <!-- {{id.id}}  -->
              {{id.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="filters">
        <mat-form-field>
          <mat-label>Subjects:</mat-label>
          <mat-select [multiple]="true" [value]="_selectedSubjects()" (selectionChange)="subjectChange($event)">
            <mat-option *ngFor="let subject of availableSubjects()" [value]="subject.value">
              {{subject.viewValue}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <!-- <div class="charts-grid">
      <div class="charts-container">
        <div class="chart-box" *ngFor="let chart of analysisStateService.visibleCharts()" cdkDrag>
          <div [ngSwitch]="chart.id">
            {{chart.title}}
            <app-chart-grades-average *ngSwitchCase="'chart1'" [studentsAverages]="_studentsAverages"
              [xAxisLabel]="'Students'" [yAxisLabel]="'Average'"></app-chart-grades-average>

            <app-chart-subjects-avg *ngSwitchCase="'chart2'" [xAxisLabel]="'Subjects'" [yAxisLabel]="'Average'"
              [subjectAverages]="_subjectAverages"></app-chart-subjects-avg>
            
          </div>
        </div>
      </div>
    </div> -->
    <!-- (cdkDropListDropped)="drop($event)" -->
    <div class="charts-grid">
    <div cdkDropList cdkDropListOrientation="horizontal" class="charts-container" (cdkDropListDropped)="drop($event)">
      <div class="chart-box" *ngFor="let chart of analysisStateService.visibleCharts()" cdkDrag>
        <div [ngSwitch]="chart.id">
          {{chart.id}}
          <app-chart-grades-average *ngSwitchCase="'chart1'" [studentsAverages]="_studentsAverages"
              [xAxisLabel]="'Students'" [yAxisLabel]="'Average'"></app-chart-grades-average>

            <app-chart-subjects-avg *ngSwitchCase="'chart2'" [xAxisLabel]="'Subjects'" [yAxisLabel]="'Average'"
              [subjectAverages]="_subjectAverages"></app-chart-subjects-avg>
        </div>
      </div>
    </div>
  </div>

    <!-- <div class="hidden-charts">
    <div *ngFor="let chart of analysisStateService.hiddenCharts()" class="hidden-chart-button" cdkDrag
      (cdkDragEnded)="onHiddenChartDragEnded($event, chart)">
      {{chart.title}}
    </div>
  </div> -->
  </div>
</div>